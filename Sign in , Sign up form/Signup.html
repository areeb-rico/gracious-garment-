<!doctype html>
<html lang="en">

<head>
    <title>Sign Up | Gracious Garments</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Bootstrap CSS v5.2.1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="Signup.css">
</head>

<body>

    <section>
        <div class="imgBx">
            <img src="../images/image.png" alt="">
        </div>
        <div class="contentBx">
            
            <div class="formBx">
                <h2>Sign up</h2>
                <form id="signupForm" onsubmit="return validateSignUpForm(event)">
                    <div class="inputBx">
                        <span>Username</span>
                        <input type="text" id="username" class="inputs" placeholder="Enter your username" required>
                    </div>
                    <div class="inputBx">
                        <span>E-mail</span>
                        <input type="email" id="email" class="inputs" placeholder="Enter your email" required>
                    </div>
                    <div class="inputBx">
                        <span>Password</span>
                        <input type="password" id="password" class="inputs" placeholder="Enter your password" required>
                    </div>
                    <div class="inputBx">
                        <span>Confirm Password</span>
                        <input type="password" id="confirmPassword" class="inputs" placeholder="Confirm your password" required>
                    </div>
                    <div class="inputBx">
                        <button type="submit" onclick="sendmail()" style="color: rgb(247, 244, 244);">Sign Up</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Bootstrap JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
    </script>
    <script>
        function validateSignUpForm(event) {
            event.preventDefault(); // Prevent form submission for validation

            const username = document.getElementById("username").value.trim();
            const email = document.getElementById("email").value.trim();
            const password = document.getElementById("password").value;
            const confirmPassword = document.getElementById("confirmPassword").value;

            // Validate username (3-20 characters, letters, numbers, underscores, and dots only)
            const usernamePattern = /^[a-zA-Z0-9._]{3,20}$/;
            if (!usernamePattern.test(username)) {
                alert("Please enter a valid username (3-20 characters, letters, numbers, underscores, and dots only).");
                return false;
            }

            // Validate email
            const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
            if (!emailPattern.test(email)) {
                alert("Please enter a valid email address.");
                return false;
            }

            // Validate password length (at least 8 characters)
            if (password.length < 8) {
                alert("Password must be at least 8 characters long.");
                return false;
            }

            // Check if passwords match
            if (password !== confirmPassword) {
                alert("Passwords do not match.");
                return false;
            }

            // Store the user data in localStorage
            const userData = {
                username: username,
                email: email,
                password: password
            };
            localStorage.setItem("user", JSON.stringify(userData));

            alert("Registration successful!");
            window.location.href = "Signin.html"; // Redirect to login page
        }
        (function () {
            emailjs.init({
                publicKey: "SP5uxVh1zRPpXtRtv",
            });
        })();
        function sendmail(){
            var inp = document.getElementsByClassName('inputs')
            var obj = {
                    "name": inp[0].value,
                    "email": inp[1].value,
                    "password": inp[2].value,
                    "confirmpass":inp[3].value
        }
        emailjs.send('service_l7tawyj', 'template_tcpuw0o', obj);
    }
    </script>
</body>

</html>